"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[198],{5400:function(e,t,i){let s;i.d(t,{GL:function(){return eo},GX:function(){return es},Yk:function(){return m},ox:function(){return ei},yS:function(){return V}});var o=i(5619);i(4155);/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */let r="data-tabster",n="data-tabster-dummy",l="tabster:modalizer:beforefocusout",a="tabster:mover",u="tabster:focusin",d="tabster:focusout",c={Invisible:0,PartiallyVisible:1,Visible:2},h={Both:0,Vertical:1,Horizontal:2,Grid:3};var m=Object.freeze({__proto__:null,TabsterAttributeName:r,TabsterDummyInputAttributeName:n,DeloserEventName:"tabster:deloser",ModalizerActiveEventName:"tabster:modalizer:active",ModalizerInactiveEventName:"tabster:modalizer:inactive",ModalizerFocusInEventName:"tabster:modalizer:focusin",ModalizerFocusOutEventName:"tabster:modalizer:focusout",ModalizerBeforeFocusOutEventName:l,MoverEventName:a,FocusInEventName:u,FocusOutEventName:d,ObservedElementAccesibilities:{Any:0,Accessible:1,Focusable:2},RestoreFocusOrders:{History:0,DeloserDefault:1,RootDefault:2,DeloserFirst:3,RootFirst:4},Visibilities:c,MoverDirections:h,GroupperTabbabilities:{Unlimited:0,Limited:1,LimitedTrapFocus:2}});/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function _(e,t){var i;return null===(i=e.storageEntry(t))||void 0===i?void 0:i.tabster}function f(e,t,i){var s,o;let n;let l=i||e._noop?void 0:t.getAttribute(r),a=e.storageEntry(t);if(l){if(l===(null===(s=null==a?void 0:a.attr)||void 0===s?void 0:s.string))return;try{let e=JSON.parse(l);if("object"!=typeof e)throw Error(`Value is not a JSON object, got '${l}'.`);n={string:l,object:e}}catch(e){}}else if(!a)return;a||(a=e.storageEntry(t,!0)),a.tabster||(a.tabster={});let u=a.tabster||{},d=(null===(o=a.attr)||void 0===o?void 0:o.object)||{},c=(null==n?void 0:n.object)||{};for(let i of Object.keys(d))if(!c[i]){if("root"===i){let t=u[i];t&&e.root.onRoot(t,!0)}switch(i){case"deloser":case"root":case"groupper":case"modalizer":case"mover":let s=u[i];s&&(s.dispose(),delete u[i]);break;case"observed":delete u[i],e.observedElement&&e.observedElement.onObservedElementUpdate(t);break;case"focusable":case"outline":case"uncontrolled":delete u[i]}}for(let i of Object.keys(c))switch(i){case"deloser":u.deloser?u.deloser.setProps(c.deloser):e.deloser&&(u.deloser=e.deloser.createDeloser(t,c.deloser));break;case"root":u.root?u.root.setProps(c.root):u.root=e.root.createRoot(t,c.root),e.root.onRoot(u.root);break;case"modalizer":u.modalizer?u.modalizer.setProps(c.modalizer):e.modalizer&&(u.modalizer=e.modalizer.createModalizer(t,c.modalizer));break;case"focusable":u.focusable=c.focusable;break;case"groupper":u.groupper?u.groupper.setProps(c.groupper):e.groupper&&(u.groupper=e.groupper.createGroupper(t,c.groupper));break;case"mover":u.mover?u.mover.setProps(c.mover):e.mover&&(u.mover=e.mover.createMover(t,c.mover));break;case"observed":e.observedElement&&(u.observed=c.observed,e.observedElement.onObservedElementUpdate(t));break;case"uncontrolled":u.uncontrolled=c.uncontrolled;break;case"outline":e.outline&&(u.outline=c.outline);break;default:console.error(`Unknown key '${i}' in data-tabster attribute value.`)}n?a.attr=n:(0===Object.keys(u).length&&(delete a.tabster,delete a.attr),e.storageEntry(t,!1))}let b="undefined"!=typeof DOMRect?DOMRect:class{constructor(e,t,i,s){this.left=e||0,this.top=t||0,this.right=(e||0)+(i||0),this.bottom=(t||0)+(s||0)}},v=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),s=!1}catch(e){s=!0}function g(e){let t=e(),i=t.__tabsterInstanceContext;return i||(i={elementByUId:{},basics:{Promise:t.Promise||void 0,WeakRef:t.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},t.__tabsterInstanceContext=i),i}class p{constructor(e){this._target=e}deref(){return this._target}static cleanup(e,t){return!e._target||(!!t||!O(e._target.ownerDocument,e._target))&&(delete e._target,!0)}}class T{constructor(e,t,i){let s;let o=g(e);o.WeakRef?s=new o.WeakRef(t):(s=new p(t),o.fakeWeakRefs.push(s)),this._ref=s,this._data=i}get(){let e;let t=this._ref;return!t||(e=t.deref())||delete this._ref,e}getData(){return this._data}}function E(e,t){let i=g(e);i.fakeWeakRefs=i.fakeWeakRefs.filter(e=>!p.cleanup(e,t))}function y(e,t,i){if(t.nodeType!==Node.ELEMENT_NODE)return;let o=s?i:{acceptNode:i};return e.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,o,!1)}function w(e,t){let i=t.__tabsterCacheId,s=g(e),o=i?s.containerBoundingRectCache[i]:void 0;if(o)return o.rect;let r=t.ownerDocument&&t.ownerDocument.documentElement;if(!r)return new b;let n=0,l=0,a=r.clientWidth,u=r.clientHeight;if(t!==r){let e=t.getBoundingClientRect();n=Math.max(n,e.left),l=Math.max(l,e.top),a=Math.min(a,e.right),u=Math.min(u,e.bottom)}let d=new b(n<a?n:-1,l<u?l:-1,n<a?a-n:0,l<u?u-l:0);return i||(i="r-"+ ++s.lastContainerBoundingRectCacheId,t.__tabsterCacheId=i),s.containerBoundingRectCache[i]={rect:d,element:t},s.containerBoundingRectCacheTimer||(s.containerBoundingRectCacheTimer=window.setTimeout(()=>{for(let e of(s.containerBoundingRectCacheTimer=void 0,Object.keys(s.containerBoundingRectCache)))delete s.containerBoundingRectCache[e].element.__tabsterCacheId;s.containerBoundingRectCache={}},50)),d}function F(e,t,i){let s=R(t);if(!s)return!1;let o=w(e,s),r=t.getBoundingClientRect(),n=r.height*(1-i),l=Math.max(0,o.top-r.top),a=Math.max(0,r.bottom-o.bottom),u=l+a;return 0===u||u<=n}function I(e,t,i){let s=R(t);if(s){let o=w(e,s),r=t.getBoundingClientRect();i?s.scrollTop+=r.top-o.top:s.scrollTop+=r.bottom-o.bottom}}function R(e){let t=e.ownerDocument;if(t){for(let t=e.parentElement;t;t=t.parentElement)if(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)return t;return t.documentElement}return null}function C(e){return!!e.__shouldIgnoreFocus}function D(e,t){let i=g(e),s=t.__tabsterElementUID;return s||(s=t.__tabsterElementUID=function(e){let t=new Uint32Array(4);if(e.crypto&&e.crypto.getRandomValues)e.crypto.getRandomValues(t);else if(e.msCrypto&&e.msCrypto.getRandomValues)e.msCrypto.getRandomValues(t);else for(let e=0;e<t.length;e++)t[e]=4294967295*Math.random();let i=[];for(let e=0;e<t.length;e++)i.push(t[e].toString(36));return i.push("|"),i.push((++v).toString(36)),i.push("|"),i.push(Date.now().toString(36)),i.join("")}(e())),!i.elementByUId[s]&&O(t.ownerDocument,t)&&(i.elementByUId[s]=new T(e,t)),s}function k(e,t){let i=g(e);for(let e of Object.keys(i.elementByUId)){let s=i.elementByUId[e],o=s&&s.get();(!o||!t||t.contains(o))&&delete i.elementByUId[e]}}function O(e,t){var i;return!!(null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.contains(t))}function M(e,t){let i=e.matches||e.matchesSelector||e.msMatchesSelector||e.webkitMatchesSelector;return i&&i.call(e,t)}let N=0;class x{constructor(e,t,i){let s=e.getWindow;this._tabster=e,this._element=new T(s,t),this._props={...i},this.id="i"+ ++N}getElement(){return this._element.get()}getProps(){return this._props}setProps(e){this._props={...e}}}class W{constructor(e,t,i,s){var o;this._focusIn=e=>{let t=this.input;if(this.onFocusIn&&t){let i=z.getLastPhantomFrom()||e.relatedTarget;this.onFocusIn(this,this._isBackward(!0,t,i),i)}},this._focusOut=e=>{this.useDefaultAction=!1;let t=this.input;if(this.onFocusOut&&t){let i=e.relatedTarget;this.onFocusOut(this,this._isBackward(!1,t,i),i)}};let r=e(),l=r.document.createElement("i");l.tabIndex=0,l.setAttribute("role","none"),l.setAttribute(n,""),l.setAttribute("aria-hidden","true");let a=l.style;a.position="fixed",a.width=a.height="1px",a.opacity="0.001",a.zIndex="-1",a.setProperty("content-visibility","hidden"),l.__shouldIgnoreFocus=!0,this.input=l,this.isFirst=i.isFirst,this.isOutside=t,this._isPhantom=null!==(o=i.isPhantom)&&void 0!==o&&o,l.addEventListener("focusin",this._focusIn),l.addEventListener("focusout",this._focusOut),l.__tabsterDummyContainer=s,this._isPhantom&&(this._disposeTimer=r.setTimeout(()=>{delete this._disposeTimer,this.dispose()},0),this._clearDisposeTimeout=()=>{this._disposeTimer&&(r.clearTimeout(this._disposeTimer),delete this._disposeTimer),delete this._clearDisposeTimeout})}dispose(){var e;this._clearDisposeTimeout&&this._clearDisposeTimeout();let t=this.input;t&&(delete this.onFocusIn,delete this.onFocusOut,delete this.input,t.removeEventListener("focusin",this._focusIn),t.removeEventListener("focusout",this._focusOut),delete t.__tabsterDummyContainer,null===(e=t.parentElement)||void 0===e||e.removeChild(t))}setTopLeft(e,t){var i;let s=null===(i=this.input)||void 0===i?void 0:i.style;s&&(s.top=`${e}px`,s.left=`${t}px`)}_isBackward(e,t,i){return e&&!i?!this.isFirst:!!(i&&t.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING)}}let A={Root:1,Modalizer:2,Mover:3,Groupper:4};class z{constructor(e,t,i,s,o){this._element=t,this._instance=new L(e,t,this,i,s,o),this.moveOut=e=>{var t;null===(t=this._instance)||void 0===t||t.moveOut(e)},this.moveOutWithDefaultAction=e=>{var t;null===(t=this._instance)||void 0===t||t.moveOutWithDefaultAction(e)}}_setHandlers(e,t){this._onFocusIn=e,this._onFocusOut=t}getHandler(e){return e?this._onFocusIn:this._onFocusOut}setTabbable(e){var t;null===(t=this._instance)||void 0===t||t.setTabbable(this,e)}dispose(){this._instance&&(this._instance.dispose(this),delete this._instance),delete this._onFocusIn,delete this._onFocusOut}static getLastPhantomFrom(){let e=z._lastPhantomFrom;return delete z._lastPhantomFrom,e}static moveWithPhantomDummy(e,t,i,s){let r=new W(e.getWindow,!0,{isPhantom:!0,isFirst:!0}),n=r.input;if(n){let r=t.parentElement;if(r){let l=i&&!s||!i&&s?t.nextElementSibling:t;if(l){if(s){let e=l.previousElementSibling;e&&e.__tabsterDummyContainer&&(l=e)}else l.__tabsterDummyContainer&&(l=l.nextElementSibling)}r.insertBefore(n,l),z._lastPhantomFrom=t,e.getWindow().setTimeout(()=>{delete z._lastPhantomFrom},0),(0,o.ev)(n)}}}}class L{constructor(e,t,i,s,r,n){var l;this._wrappers=[],this._isOutside=!1,this._transformElements=[],this._onFocusIn=(e,t,i)=>{this._onFocus(!0,e,t,i)},this._onFocusOut=(e,t,i)=>{this._onFocus(!1,e,t,i)},this.moveOut=e=>{var t;let i=this._firstDummy,s=this._lastDummy;if(i&&s){let r=i.input,n=s.input,l=null===(t=this._element)||void 0===t?void 0:t.get();if(r&&n&&l){let t;e?(r.tabIndex=0,t=r):(n.tabIndex=0,t=n),t&&(0,o.ev)(t)}}},this.moveOutWithDefaultAction=e=>{var t;let i=this._firstDummy,s=this._lastDummy;if(i&&s){let r=i.input,n=s.input,l=null===(t=this._element)||void 0===t?void 0:t.get();if(r&&n&&l){let t;e?!i.isOutside&&this._tabster.focusable.isFocusable(l,!0,!0,!0)?t=l:(i.useDefaultAction=!0,r.tabIndex=0,t=r):(s.useDefaultAction=!0,n.tabIndex=0,t=n),t&&(0,o.ev)(t)}}},this.setTabbable=(e,t)=>{var i,s;for(let i of this._wrappers)if(i.manager===e){i.tabbable=t;break}let o=this._getCurrent();if(o){let e=o.tabbable?0:-1,t=null===(i=this._firstDummy)||void 0===i?void 0:i.input;t&&(t.tabIndex=e),(t=null===(s=this._lastDummy)||void 0===s?void 0:s.input)&&(t.tabIndex=e)}},this._addTransformOffsets=()=>{let e=this._getWindow();this._scrollTimer&&e.clearTimeout(this._scrollTimer),this._scrollTimer=e.setTimeout(()=>{delete this._scrollTimer,this._reallyAddTransformOffsets()},100)};let a=t.get();if(!a)throw Error("No element");this._tabster=e,this._getWindow=e.getWindow,this._callForDefaultAction=n;let u=a.__tabsterDummy;if((u||this)._wrappers.push({manager:i,priority:s,tabbable:!0}),u)return u;a.__tabsterDummy=this;let d=null===(l=t.get())||void 0===l?void 0:l.tagName;this._isOutside=(r||"UL"===d||"OL"===d||"TABLE"===d)&&!("LI"===d||"TD"===d||"TH"===d),this._firstDummy=new W(this._getWindow,this._isOutside,{isFirst:!0},t),this._lastDummy=new W(this._getWindow,this._isOutside,{isFirst:!1},t),this._firstDummy.onFocusIn=this._onFocusIn,this._firstDummy.onFocusOut=this._onFocusOut,this._lastDummy.onFocusIn=this._onFocusIn,this._lastDummy.onFocusOut=this._onFocusOut,this._element=t,this._addDummyInputs(),this._observeMutations()}dispose(e,t){var i,s,o;let r=this._wrappers=this._wrappers.filter(i=>i.manager!==e&&!t);if(0===r.length){for(let e of(delete(null===(i=this._element)||void 0===i?void 0:i.get()).__tabsterDummy,this._unobserve&&(this._unobserve(),delete this._unobserve),this._transformElements))e.removeEventListener("scroll",this._addTransformOffsets);this._transformElements=[];let e=this._getWindow();this._scrollTimer&&(e.clearTimeout(this._scrollTimer),delete this._scrollTimer),this._addTimer&&(e.clearTimeout(this._addTimer),delete this._addTimer),null===(s=this._firstDummy)||void 0===s||s.dispose(),null===(o=this._lastDummy)||void 0===o||o.dispose()}}_onFocus(e,t,i,s){var o;let r=this._getCurrent();r&&(!t.useDefaultAction||this._callForDefaultAction)&&(null===(o=r.manager.getHandler(e))||void 0===o||o(t,i,s))}_getCurrent(){return this._wrappers.sort((e,t)=>e.tabbable!==t.tabbable?e.tabbable?-1:1:e.priority-t.priority),this._wrappers[0]}_addDummyInputs(){this._addTimer||(this._addTimer=this._getWindow().setTimeout(()=>{var e,t,i;delete this._addTimer;let s=null===(e=this._element)||void 0===e?void 0:e.get(),o=null===(t=this._firstDummy)||void 0===t?void 0:t.input,r=null===(i=this._lastDummy)||void 0===i?void 0:i.input;if(s&&o&&r){if(this._isOutside){let e=s.parentElement;if(e){let t=s.nextElementSibling;t!==r&&e.insertBefore(r,t),s.previousElementSibling!==o&&e.insertBefore(o,s)}}else{s.lastElementChild!==r&&s.appendChild(r);let e=s.firstElementChild;e&&e!==o&&s.insertBefore(o,e)}this._addTransformOffsets()}},0))}_observeMutations(){var e;if(this._unobserve)return;let t=new MutationObserver(()=>{this._unobserve&&this._addDummyInputs()}),i=null===(e=this._element)||void 0===e?void 0:e.get(),s=this._isOutside?null==i?void 0:i.parentElement:i;s&&(t.observe(s,{childList:!0}),this._unobserve=()=>{t.disconnect()})}_reallyAddTransformOffsets(){var e,t,i,s;let o=(null===(e=this._firstDummy)||void 0===e?void 0:e.input)||(null===(t=this._lastDummy)||void 0===t?void 0:t.input),r=this._transformElements,n=[],l=new WeakMap,a=new WeakMap,u=0,d=0;for(let e of r)l.set(e,e);let c=this._getWindow();for(let e=o;e;e=e.parentElement){let t=c.getComputedStyle(e).transform;if(t&&"none"!==t){let t=l.get(e);t||(t=e).addEventListener("scroll",this._addTransformOffsets),n.push(t),a.set(t,t),u+=t.scrollTop,d+=t.scrollLeft}}for(let e of r)a.get(e)||e.removeEventListener("scroll",this._addTransformOffsets);this._transformElements=n,null===(i=this._firstDummy)||void 0===i||i.setTopLeft(u,d),null===(s=this._lastDummy)||void 0===s||s.setTopLeft(u,d)}}function P(e){let t=null;for(let i=e.lastElementChild;i;i=i.lastElementChild)t=i;return t||void 0}function B(e,t){let i=e,s=null;for(;i&&!s;)s=t?i.previousElementSibling:i.nextElementSibling,i=i.parentElement;return s||void 0}function S(e,t,i){let s=document.createEvent("HTMLEvents");return s.initEvent(t,!0,!0),s.details=i,e.dispatchEvent(s),!s.defaultPrevented}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function V(e,t){let i=JSON.stringify(e);return!0===t?i:{[r]:i}}class U extends z{constructor(e,t,i){super(e,t,A.Root,void 0,!0),this._onDummyInputFocus=e=>{var t;if(e.useDefaultAction)this._setFocused(!1,!0);else{this._tabster.keyboardNavigation.setNavigatingWithKeyboard(!0);let i=this._element.get();if(i){this._setFocused(!0,!0);let t=this._tabster.focusedElement.getFirstOrLastTabbable(e.isFirst,{container:i,ignoreAccessibility:!0});if(t){(0,o.ev)(t);return}}null===(t=e.input)||void 0===t||t.blur()}},this._setHandlers(this._onDummyInputFocus),this._tabster=e,this._setFocused=i}}class K extends x{constructor(e,t,i,s){super(e,t,s),this._isFocused=!1,this._setFocused=(e,t)=>{if(this._setFocusedTimer&&(this._tabster.getWindow().clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._isFocused===e)return;let i=this._element.get();i&&(e?(this._isFocused=!0,S(this._tabster.root.eventTarget,"focus",{element:i,fromAdjacent:t})):this._setFocusedTimer=this._tabster.getWindow().setTimeout(()=>{delete this._setFocusedTimer,this._isFocused=!1,S(this._tabster.root.eventTarget,"blur",{element:i,fromAdjacent:t})},0))},this._onFocus=e=>{var t;let i=this._tabster.getWindow();if(this._setTabbableTimer&&(i.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),e){let i=G.getTabsterContext(this._tabster,e);if(i&&this._setFocused(i.root.getElement()===this._element.get()),!i||i.uncontrolled||this._tabster.rootDummyInputs){null===(t=this._dummyManager)||void 0===t||t.setTabbable(!1);return}}else this._setFocused(!1);this._setTabbableTimer=i.setTimeout(()=>{var e;delete this._setTabbableTimer,null===(e=this._dummyManager)||void 0===e||e.setTabbable(!0)},0)},this._onDispose=i;let o=e.getWindow;this.uid=D(o,t),(e.controlTab||e.rootDummyInputs)&&this.addDummyInputs(),e.focusedElement.subscribe(this._onFocus),this._add()}addDummyInputs(){this._dummyManager||(this._dummyManager=new U(this._tabster,this._element,this._setFocused))}dispose(){var e;this._onDispose(this);let t=this._tabster.getWindow();this._setFocusedTimer&&(t.clearTimeout(this._setFocusedTimer),delete this._setFocusedTimer),this._setTabbableTimer&&(t.clearTimeout(this._setTabbableTimer),delete this._setTabbableTimer),null===(e=this._dummyManager)||void 0===e||e.dispose(),this._remove()}moveOutWithDefaultAction(e){let t=this._dummyManager;if(t)t.moveOutWithDefaultAction(e);else{let t=this.getElement();t&&U.moveWithPhantomDummy(this._tabster,t,!0,e)}}_add(){}_remove(){}}class G{constructor(e,t){this._autoRootWaiting=!1,this._roots={},this._forceDummy=!1,this.rootById={},this._init=()=>{this._initTimer=void 0,this._autoRoot&&this._autoRootCreate()},this._autoRootCreate=()=>{var e;if(this._initTimer)return;let t=this._win().document,i=t.body;if(i){this._autoRootUnwait(t);let s=this._autoRoot;if(s)return function(e,t,i){let s;if(i){let t=e.getAttribute(r);if(t)try{s=JSON.parse(t)}catch(e){}}s||(s={}),function(e,t){for(let i of Object.keys(t)){let s=t[i];s?e[i]=s:delete e[i]}}(s,t),Object.keys(s).length>0?e.setAttribute(r,V(s,!0)):e.removeAttribute(r)}(i,{root:s},!0),f(this._tabster,i),null===(e=_(this._tabster,i))||void 0===e?void 0:e.root}else this._autoRootWaiting||(this._autoRootWaiting=!0,t.addEventListener("readystatechange",this._autoRootCreate))},this._onRootDispose=e=>{delete this._roots[e.id]},this._tabster=e,this._win=e.getWindow,this._initTimer=this._win().setTimeout(this._init,0),this._autoRoot=t,this.eventTarget=/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function(e){let t=e();return t.EventTarget?new t.EventTarget:t.document.createElement("div")}(this._win)}_autoRootUnwait(e){e.removeEventListener("readystatechange",this._autoRootCreate),this._autoRootWaiting=!1}dispose(){let e=this._win();this._autoRootUnwait(e.document),delete this._autoRoot,e.clearTimeout(this._initTimer),this._initTimer=void 0,Object.keys(this._roots).forEach(e=>{this._roots[e]&&(this._roots[e].dispose(),delete this._roots[e])}),this.rootById={}}createRoot(e,t){let i=new K(this._tabster,e,this._onRootDispose,t);return this._roots[i.id]=i,this._forceDummy&&i.addDummyInputs(),i}addDummyInputs(){this._forceDummy=!0;let e=this._roots;for(let t of Object.keys(e))e[t].addDummyInputs()}static getRootByUId(e,t){let i=e().__tabsterInstance;return i&&i.root.rootById[t]}static getTabsterContext(e,t,i){var s,o,r,n;let l,a,u,d,c,h,m,f;if(void 0===i&&(i={}),!t.ownerDocument)return;let b=i.checkRtl,v=!1,g=t,p={};for(;g&&(!l||b);){let t=_(e,g);if(b&&void 0===m){let e=g.dir;e&&(m="rtl"===e.toLowerCase())}if(!t){g=g.parentElement;continue}let i=g.tagName;(t.uncontrolled||"IFRAME"===i||"WEBVIEW"===i)&&(f=g),!d&&(null===(s=t.focusable)||void 0===s?void 0:s.excludeFromMover)&&!u&&(v=!0);let n=t.modalizer,T=t.groupper,E=t.mover;!a&&n&&(a=n),!u&&T&&(!a||n)&&(a?(!T.isActive()&&T.getProps().tabbability&&a.userId!==(null===(o=e.modalizer)||void 0===o?void 0:o.activeId)&&(a=void 0,u=T),h=T):u=T),!d&&E&&(!a||n)&&(d=E,c=!!u),t.root&&(l=t.root),(null===(r=t.focusable)||void 0===r?void 0:r.ignoreKeydown)&&Object.assign(p,t.focusable.ignoreKeydown),g=g.parentElement}if(!l){let i=e.root,s=i._autoRoot;s&&(null===(n=t.ownerDocument)||void 0===n?void 0:n.body)&&(l=i._autoRootCreate())}u&&!d&&(c=!0);let T=e=>!!p[e.key];return l?{root:l,modalizer:a,groupper:u,mover:d,isGroupperFirst:c,modalizerInGroupper:h,isRtl:b?!!m:void 0,uncontrolled:f,isExcludedFromMover:v,ignoreKeydown:T}:void 0}static getRoot(e,t){var i;for(let s=t;s;s=s.parentElement){let t=null===(i=_(e,s))||void 0===i?void 0:i.root;if(t)return t}}onRoot(e,t){t?delete this.rootById[e.uid]:this.rootById[e.uid]=e}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class H{constructor(){this._callbacks=[]}dispose(){this._callbacks=[],delete this._val}subscribe(e){let t=this._callbacks,i=t.indexOf(e);i<0&&t.push(e)}subscribeFirst(e){let t=this._callbacks,i=t.indexOf(e);i>=0&&t.splice(i,1),t.unshift(e)}unsubscribe(e){let t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}setVal(e,t){this._val!==e&&(this._val=e,this._callCallbacks(e,t))}getVal(){return this._val}trigger(e,t){this._callCallbacks(e,t)}_callCallbacks(e,t){this._callbacks.forEach(i=>i(e,t))}}class j{constructor(e){this._tabster=e}dispose(){}getProps(e){let t=_(this._tabster,e);return t&&t.focusable||{}}isFocusable(e,t,i,s){return!!M(e,"a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), *[tabindex], *[contenteditable]")&&(!!t||-1!==e.tabIndex)&&(i||this.isVisible(e))&&(s||this.isAccessible(e))}isVisible(e){if(!e.ownerDocument||null===e.offsetParent&&e.ownerDocument.body!==e)return!1;let t=e.ownerDocument.defaultView;if(!t)return!1;let i=e.ownerDocument.body.getBoundingClientRect();if(0===i.width&&0===i.height)return!1;let s=t.getComputedStyle(e);return"hidden"!==s.visibility}isAccessible(e){var t;for(let i=e;i;i=i.parentElement){let e=_(this._tabster,i);if(this._isHidden(i))return!1;let s=null===(t=null==e?void 0:e.focusable)||void 0===t?void 0:t.ignoreAriaDisabled;if(!s&&this._isDisabled(i))return!1}return!0}_isDisabled(e){return e.hasAttribute("disabled")}_isHidden(e){var t;let i=e.getAttribute("aria-hidden");return!(!i||"true"!==i.toLowerCase()||(null===(t=this._tabster.modalizer)||void 0===t?void 0:t.isAugmented(e)))}findFirst(e){return this.findElement({...e})}findLast(e){return this.findElement({isBackward:!0,...e})}findNext(e){return this.findElement({...e})}findPrev(e){return this.findElement({isBackward:!0,...e})}findDefault(e){return this.findElement({...e,acceptCondition:t=>this._tabster.focusable.isFocusable(t,e.includeProgrammaticallyFocusable)&&!!this.getProps(t).isDefault})||null}findAll(e){return this._findElements(!0,e)||[]}findElement(e){let t=this._findElements(!1,e);return t?t[0]:t}_findElements(e,t){var i,s,o;let r;let{container:n,currentElement:l=null,includeProgrammaticallyFocusable:a,useActiveModalizer:u,ignoreUncontrolled:d,ignoreAccessibility:c,modalizerId:h,isBackward:m,onUncontrolled:_,onElement:f}=t,b=[],{acceptCondition:v}=t;if(!n)return null;v||(v=e=>this._tabster.focusable.isFocusable(e,a,!1,c));let g={container:n,modalizerUserId:void 0===h&&u?null===(i=this._tabster.modalizer)||void 0===i?void 0:i.activeId:h||(null===(o=null===(s=G.getTabsterContext(this._tabster,n))||void 0===s?void 0:s.modalizer)||void 0===o?void 0:o.userId),from:l||n,isBackward:m,acceptCondition:v,includeProgrammaticallyFocusable:a,ignoreUncontrolled:d,ignoreAccessibility:c,cachedGrouppers:{}},p=y(n.ownerDocument,n,e=>this._acceptElement(e,g));if(!p)return null;let T=t=>{let i=g.foundElement;return(i&&b.push(i),e)?(!i||(g.found=!1,delete g.foundElement,delete g.fromCtx,g.from=i,!f||!!f(i)))&&!!(i||t):!!(t&&!i)};if(l)p.currentNode=l;else if(m){let e=P(n);if(!e)return null;if(this._acceptElement(e,g)===NodeFilter.FILTER_ACCEPT&&!T(!0))return b;p.currentNode=e}do r=(m?p.previousNode():p.nextNode())||void 0;while(T());if(!e){let e=g.nextUncontrolled;if(e){if(_&&_(e),r)return;return null}}return b.length?b:null}_acceptElement(e,t){var i,s,o,r,n;let l;if(t.found)return NodeFilter.FILTER_ACCEPT;let a=t.container;if(e===a)return NodeFilter.FILTER_SKIP;if(!a.contains(e)||e.__tabsterDummyContainer)return NodeFilter.FILTER_REJECT;let u=t.lastToIgnore;if(u){if(u.contains(e))return NodeFilter.FILTER_REJECT;u=t.lastToIgnore=void 0}let d=t.currentCtx=G.getTabsterContext(this._tabster,e);if(!d)return NodeFilter.FILTER_SKIP;if(t.ignoreUncontrolled){if(C(e))return NodeFilter.FILTER_SKIP}else if(d.uncontrolled&&!t.nextUncontrolled&&this._tabster.focusable.isFocusable(e,void 0,!0,!0)&&!d.groupper&&!d.mover&&(null===(i=d.modalizer)||void 0===i?void 0:i.userId)===(null===(s=this._tabster.modalizer)||void 0===s?void 0:s.activeId))return this.isVisible(d.uncontrolled)&&(t.nextUncontrolled=d.uncontrolled),NodeFilter.FILTER_REJECT;if("IFRAME"===e.tagName||"WEBVIEW"===e.tagName)return(null===(o=d.modalizer)||void 0===o?void 0:o.userId)===(null===(r=this._tabster.modalizer)||void 0===r?void 0:r.activeId)?(t.found=!0,t.lastToIgnore=t.foundElement=e,NodeFilter.FILTER_ACCEPT):NodeFilter.FILTER_REJECT;if(!t.ignoreAccessibility&&!this.isAccessible(e))return NodeFilter.FILTER_REJECT;let c=t.fromCtx;c||(c=t.fromCtx=G.getTabsterContext(this._tabster,t.from));let h=null==c?void 0:c.mover,m=d.groupper,_=d.mover;if(void 0===(l=null===(n=this._tabster.modalizer)||void 0===n?void 0:n.acceptElement(e,t))&&(m||_||h)){let i=null==m?void 0:m.getElement(),s=null==h?void 0:h.getElement(),o=null==_?void 0:_.getElement();o&&s&&a.contains(s)&&(!i||!_||s.contains(i))&&(_=h,o=s),i&&(i===a||!a.contains(i))&&(m=void 0),o&&!a.contains(o)&&(_=void 0),m&&_&&(o&&i&&!i.contains(o)?_=void 0:m=void 0),m&&(l=m.acceptElement(e,t)),_&&(l=_.acceptElement(e,t))}return void 0===l&&(l=t.acceptCondition(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),l!==NodeFilter.FILTER_ACCEPT||t.found||(t.found=!0,t.foundElement=e),l}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */let J={Tab:9,Enter:13,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40};/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class $ extends H{constructor(e,t){super(),this._init=()=>{this._initTimer=void 0;let e=this._win();e.document.addEventListener(o.PW,this._onFocusIn,!0),e.document.addEventListener("focusout",this._onFocusOut,!0),e.addEventListener("keydown",this._onKeyDown,!0),this.subscribe(this._onChanged)},this._onFocusIn=e=>{this._setFocusedElement(e.target,e.details.relatedTarget,e.details.isFocusedProgrammatically)},this._onFocusOut=e=>{this._setFocusedElement(void 0,e.relatedTarget)},this._validateFocusedElement=e=>{},this._onKeyDown=e=>{var t,i,s,r,n,a;let u;if(e.keyCode!==J.Tab||e.ctrlKey)return;let d=this.getVal();if(!d||!d.ownerDocument||"true"===d.contentEditable)return;let c=this._tabster,h=c.controlTab,m=G.getTabsterContext(c,d);if(!m||m.ignoreKeydown(e))return;let _=e.shiftKey,f=$.findNextTabbable(c,m,void 0,d,_,void 0,!0);if(f){let e=f.uncontrolled;if(e){let s=m.isGroupperFirst,o=!1;if(void 0!==s){let r;let n=null===(t=m.groupper)||void 0===t?void 0:t.getElement(),l=null===(i=m.mover)||void 0===i?void 0:i.getElement();s&&n&&e.contains(n)?r=n:!s&&l&&e.contains(l)&&(r=l),r&&(e=r,o=!0)}e&&m.uncontrolled!==e&&z.moveWithPhantomDummy(this._tabster,e,o,_);return}u=f.element}if(u){let t=()=>{e.preventDefault(),e.stopImmediatePropagation()};if(h)"IFRAME"!==u.tagName&&(t(),(0,o.ev)(u));else{let e=null==f?void 0:f.lastMoverOrGroupper,i=null==f?void 0:f.outOfDOMOrder;if(!i&&d.compareDocumentPosition(u)&(_?document.DOCUMENT_POSITION_FOLLOWING:document.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i)t(),(0,o.ev)(u);else if(e)null===(s=e.dummyManager)||void 0===s||s.moveOutWithDefaultAction(_);else if(m.modalizer){let e=G.getTabsterContext(c,u);(!e||m.root.uid!==e.root.uid||!(null===(r=e.modalizer)||void 0===r?void 0:r.isActive()))&&m.modalizer.triggerFocusEvent(l,!0)?t():(null===(n=m.modalizer.getElement())||void 0===n?void 0:n.contains(u))||(t(),null===(a=m.modalizer.dummyManager)||void 0===a||a.moveOut(_))}}}else m.root.moveOutWithDefaultAction(_)},this._onChanged=(e,t)=>{var i,s;if(e)S(e,u,t);else{let e=null===(i=this._lastVal)||void 0===i?void 0:i.get();if(e){let i={...t},o=G.getTabsterContext(this._tabster,e),r=null===(s=null==o?void 0:o.modalizer)||void 0===s?void 0:s.userId;r&&(i.modalizerId=r),S(e,d,i)}}},this._tabster=e,this._win=t,this._initTimer=t().setTimeout(this._init,0)}dispose(){super.dispose();let e=this._win();this._initTimer&&(e.clearTimeout(this._initTimer),this._initTimer=void 0),e.document.removeEventListener(o.PW,this._onFocusIn,!0),e.document.removeEventListener("focusout",this._onFocusOut,!0),e.removeEventListener("keydown",this._onKeyDown,!0),this.unsubscribe(this._onChanged),delete $._lastResetElement,delete this._nextVal,delete this._lastVal}static forgetMemorized(e,t){var i,s;let o=$._lastResetElement,r=o&&o.get();r&&t.contains(r)&&delete $._lastResetElement,(r=null===(s=null===(i=e._nextVal)||void 0===i?void 0:i.element)||void 0===s?void 0:s.get())&&t.contains(r)&&delete e._nextVal,(r=(o=e._lastVal)&&o.get())&&t.contains(r)&&delete e._lastVal}getFocusedElement(){return this.getVal()}getLastFocusedElement(){var e;let t=null===(e=this._lastVal)||void 0===e?void 0:e.get();return t&&(!t||O(t.ownerDocument,t))||(this._lastVal=t=void 0),t}focus(e,t,i){return!!this._tabster.focusable.isFocusable(e,t,!1,i)&&(e.focus(),!0)}focusDefault(e){let t=this._tabster.focusable.findDefault({container:e});return!!t&&(this._tabster.focusedElement.focus(t),!0)}getFirstOrLastTabbable(e,t){let i,s;let o=this._tabster.focusable,{container:r,ignoreAccessibility:n}=t;if(r){let t=G.getTabsterContext(this._tabster,r);if(t){let l=$.findNextTabbable(this._tabster,t,r,void 0,!e,void 0,n);if(l)for(s=l.element,i=l.uncontrolled;!s&&i;)!(s=o.isFocusable(i,!1,!0,!0)?i:o[e?"findFirst":"findLast"]({container:i,ignoreUncontrolled:!0,ignoreAccessibility:n,useActiveModalizer:!0}))&&(l=$.findNextTabbable(this._tabster,t,i,void 0,!e,void 0,n))&&(s=l.element,i=l.uncontrolled)}}return!s||(null==r?void 0:r.contains(s))||(s=void 0),s||void 0}_focusFirstOrLast(e,t){let i=this.getFirstOrLastTabbable(e,t);return!!i&&(this.focus(i,!1,!0),!0)}focusFirst(e){return this._focusFirstOrLast(!0,e)}focusLast(e){return this._focusFirstOrLast(!1,e)}resetFocus(e){if(!this._tabster.focusable.isVisible(e))return!1;if(this._tabster.focusable.isFocusable(e,!0,!0,!0))this.focus(e);else{let t=e.getAttribute("tabindex"),i=e.getAttribute("aria-hidden");e.tabIndex=-1,e.setAttribute("aria-hidden","true"),$._lastResetElement=new T(this._win,e),this.focus(e,!0,!0),this._setOrRemoveAttribute(e,"tabindex",t),this._setOrRemoveAttribute(e,"aria-hidden",i)}return!0}_setOrRemoveAttribute(e,t,i){null===i?e.removeAttribute(t):e.setAttribute(t,i)}_setFocusedElement(e,t,i){var s,o;if(this._tabster._noop)return;let r={relatedTarget:t};if(e){let t=null===(s=$._lastResetElement)||void 0===s?void 0:s.get();if($._lastResetElement=void 0,t===e||C(e))return;r.isFocusedProgrammatically=i;let n=G.getTabsterContext(this._tabster,e),l=null===(o=null==n?void 0:n.modalizer)||void 0===o?void 0:o.userId;l&&(r.modalizerId=l)}let n=this._nextVal={element:e?new T(this._win,e):void 0,details:r};e&&e!==this._val&&this._validateFocusedElement(e),this._nextVal===n&&this.setVal(e,r),this._nextVal=void 0}setVal(e,t){super.setVal(e,t),e&&(this._lastVal=new T(this._win,e))}static findNextTabbable(e,t,i,s,o,r,n){let l=i||t.root.getElement();if(!l)return null;let a=null,u=$._isTabbingTimer,d=e.getWindow();u&&d.clearTimeout(u),$.isTabbing=!0,$._isTabbingTimer=d.setTimeout(()=>{delete $._isTabbingTimer,$.isTabbing=!1},0);let c=(t,i)=>{a=t.findNextTabbable(i||s,o,r,n);let l=null==a?void 0:a.lastMoverOrGroupper;if(l&&!(null==a?void 0:a.element)&&!(null==a?void 0:a.uncontrolled)){let t=l.getElement(),i=null==t?void 0:t.parentElement,s=i&&G.getTabsterContext(e,i);if(s){let e=s.isGroupperFirst,i=e?s.groupper:s.mover;if(i){let e=o?t:P(t);c(i,e),a&&(a.outOfDOMOrder=!0)}}}},h=t.modalizer,m=t.groupper,_=t.mover;if(m&&_)c(t.isGroupperFirst?m:_);else if(m)c(m);else if(_)c(_);else if(h)c(h);else{let t;let i=e=>{t=e},u=o?e.focusable.findPrev({container:l,currentElement:s,onUncontrolled:i,ignoreUncontrolled:r,ignoreAccessibility:n,useActiveModalizer:!0}):e.focusable.findNext({container:l,currentElement:s,onUncontrolled:i,ignoreUncontrolled:r,ignoreAccessibility:n,useActiveModalizer:!0});a={element:t?void 0:u,uncontrolled:t}}let f=null==a?void 0:a.lastMoverOrGroupper,b=null==f?void 0:f.getElement();if(b){a=null;let t=B(b,o);if(t){let i=G.getTabsterContext(e,t,{checkRtl:!0});if(i){let s=B(t,!o);s&&(o||(s=P(s)||s),(a=$.findNextTabbable(e,i,l,s,o,r,n))&&!a.lastMoverOrGroupper&&(a.lastMoverOrGroupper=f))}}}return a}}$.isTabbing=!1;/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class Q extends H{constructor(e){super(),this._onChange=e=>{this.setVal(e,void 0)},this._keyborg=(0,o.Vm)(e()),this._keyborg.subscribe(this._onChange)}dispose(){super.dispose(),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),(0,o.ub)(this._keyborg),delete this._keyborg)}setNavigatingWithKeyboard(e){var t;null===(t=this._keyborg)||void 0===t||t.setVal(e)}isNavigatingWithKeyboard(){var e;return!!(null===(e=this._keyborg)||void 0===e?void 0:e.isNavigatingWithKeyboard())}}class X extends z{constructor(e,t,i){super(t,e,A.Mover),this._onFocusDummyInput=e=>{var t,i;let s=this._element.get(),r=e.input;if(s&&r){let n;let l=G.getTabsterContext(this._tabster,s);l&&(n=null===(t=$.findNextTabbable(this._tabster,l,void 0,r,!e.isFirst,!0))||void 0===t?void 0:t.element);let a=null===(i=this._getMemorized())||void 0===i?void 0:i.get();a&&(n=a),n&&(0,o.ev)(n)}},this._tabster=t,this._getMemorized=i,this._setHandlers(this._onFocusDummyInput)}}class q extends x{constructor(e,t,i,s){var o;super(e,t,s),this._visible={},this._onIntersection=e=>{for(let t of e){let e;let i=t.target,s=D(this._win,i),o=this._fullyVisible;if(t.intersectionRatio>=.25&&(e=t.intersectionRatio>=.75?c.Visible:c.PartiallyVisible)===c.Visible&&(o=s),this._visible[s]!==e){void 0===e?(delete this._visible[s],o===s&&delete this._fullyVisible):(this._visible[s]=e,this._fullyVisible=o);let t=this.getState(i);t&&S(i,a,t)}}},this._win=e.getWindow,this.visibilityTolerance=null!==(o=s.visibilityTolerance)&&void 0!==o?o:.8,(this._props.trackState||this._props.visibilityAware)&&(this._intersectionObserver=new IntersectionObserver(this._onIntersection,{threshold:[0,.25,.5,.75,1]}),this._observeState()),this._onDispose=i;let r=()=>s.memorizeCurrent?this._current:void 0;e.controlTab||(this.dummyManager=new X(this._element,e,r))}dispose(){var e;this._onDispose(this),this._intersectionObserver&&(this._intersectionObserver.disconnect(),delete this._intersectionObserver),delete this._current,delete this._fullyVisible,delete this._allElements,delete this._updateQueue,this._unobserve&&(this._unobserve(),delete this._unobserve);let t=this._win();this._setCurrentTimer&&(t.clearTimeout(this._setCurrentTimer),delete this._setCurrentTimer),this._updateTimer&&(t.clearTimeout(this._updateTimer),delete this._updateTimer),null===(e=this.dummyManager)||void 0===e||e.dispose()}setCurrent(e){e?this._current=new T(this._win,e):this._current=void 0,(this._props.trackState||this._props.visibilityAware)&&!this._setCurrentTimer&&(this._setCurrentTimer=this._win().setTimeout(()=>{var e;delete this._setCurrentTimer;let t=[];for(let i of(this._current!==this._prevCurrent&&(t.push(this._current),t.push(this._prevCurrent),this._prevCurrent=this._current),t)){let t=null==i?void 0:i.get();if(t&&(null===(e=this._allElements)||void 0===e?void 0:e.get(t))===this){let e=this._props;if(t&&(void 0!==e.visibilityAware||e.trackState)){let e=this.getState(t);e&&S(t,a,e)}}}}))}getCurrent(){var e;return(null===(e=this._current)||void 0===e?void 0:e.get())||null}findNextTabbable(e,t,i,s){var o;let r;let n=this.getElement(),l=n&&(null===(o=null==e?void 0:e.__tabsterDummyContainer)||void 0===o?void 0:o.get())===n;if(!n)return null;let a=this._tabster,u=a.focusable,d=null,c=e=>{r=e};return(this._props.tabbable||l||e&&!n.contains(e))&&(d=t?u.findPrev({currentElement:e,container:n,onUncontrolled:c,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0}):u.findNext({currentElement:e,container:n,onUncontrolled:c,ignoreUncontrolled:i,ignoreAccessibility:s,useActiveModalizer:!0})),{element:d,uncontrolled:r,lastMoverOrGroupper:d||r?void 0:this}}acceptElement(e,t){var i,s,o;if(!$.isTabbing)return(null===(i=t.currentCtx)||void 0===i?void 0:i.isExcludedFromMover)?NodeFilter.FILTER_REJECT:void 0;let{memorizeCurrent:r,visibilityAware:n,hasDefault:l}=this._props,a=this.getElement();if(a&&(r||n||l)&&(!a.contains(t.from)||(null===(s=t.from.__tabsterDummyContainer)||void 0===s?void 0:s.get())===a)){let e;if(r){let i=null===(o=this._current)||void 0===o?void 0:o.get();i&&t.acceptCondition(i)&&(e=i)}if(!e&&l&&(e=this._tabster.focusable.findDefault({container:a,ignoreUncontrolled:!0,useActiveModalizer:!0})),!e&&n&&(e=this._tabster.focusable.findElement({container:a,ignoreUncontrolled:!0,useActiveModalizer:!0,isBackward:t.isBackward,acceptCondition:e=>{var i;let s=D(this._win,e),o=this._visible[s];return a!==e&&!!(null===(i=this._allElements)||void 0===i?void 0:i.get(e))&&t.acceptCondition(e)&&(o===c.Visible||o===c.PartiallyVisible&&(n===c.PartiallyVisible||!this._fullyVisible))}})),e)return t.found=!0,t.foundElement=e,t.lastToIgnore=a,NodeFilter.FILTER_ACCEPT}}_observeState(){let e=this.getElement();if(this._unobserve||!e||"undefined"==typeof MutationObserver)return;let t=this._win(),i=this._allElements=new WeakMap,s=this._tabster.focusable,o=this._updateQueue=[],r=new MutationObserver(e=>{for(let t of e){let e=t.target,i=t.removedNodes,s=t.addedNodes;if("attributes"===t.type)"tabindex"===t.attributeName&&o.push({element:e,type:2});else{for(let e=0;e<i.length;e++)o.push({element:i[e],type:3});for(let e=0;e<s.length;e++)o.push({element:s[e],type:1})}}d()}),n=(e,t)=>{var s,o;let r=i.get(e);r&&t&&(null===(s=this._intersectionObserver)||void 0===s||s.unobserve(e),i.delete(e)),r||t||(i.set(e,this),null===(o=this._intersectionObserver)||void 0===o||o.observe(e))},l=e=>{let t=s.isFocusable(e),o=i.get(e);o?t||n(e,!0):t&&n(e)},a=e=>{let{mover:i}=c(e);if(i&&i!==this){if(!(i.getElement()===e&&s.isFocusable(e)))return;n(e)}let o=y(t.document,e,e=>{let{mover:t,groupper:i}=c(e);if(t&&t!==this)return NodeFilter.FILTER_REJECT;let o=null==i?void 0:i.getFirst(!0);return i&&i.getElement()!==e&&o&&o!==e?NodeFilter.FILTER_REJECT:(s.isFocusable(e)&&n(e),NodeFilter.FILTER_SKIP)});if(o)for(o.currentNode=e;o.nextNode(););},u=e=>{let t=i.get(e);t&&n(e,!0);for(let t=e.firstElementChild;t;t=t.nextElementSibling)u(t)},d=()=>{!this._updateTimer&&o.length&&(this._updateTimer=t.setTimeout(()=>{for(let{element:e,type:t}of(delete this._updateTimer,o))switch(t){case 2:l(e);break;case 1:a(e);break;case 3:u(e)}o=this._updateQueue=[]},0))},c=e=>{let t={};for(let i=e;i;i=i.parentElement){let e=_(this._tabster,i);if(e&&(e.groupper&&!t.groupper&&(t.groupper=e.groupper),e.mover)){t.mover=e.mover;break}}return t};o.push({element:e,type:1}),d(),r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=()=>{r.disconnect()}}getState(e){let t=D(this._win,e);if(t in this._visible){let i=this._visible[t]||c.Invisible,s=this._current?this._current.get()===e:void 0;return{isCurrent:s,visibility:i}}}}class Y{constructor(e,t){this._init=()=>{this._initTimer=void 0;let e=this._win();e.addEventListener("keydown",this._onKeyDown,!0)},this._onMoverDispose=e=>{delete this._movers[e.id]},this._onFocus=e=>{var t;for(let i=e;i;i=i.parentElement){let s=null===(t=_(this._tabster,i))||void 0===t?void 0:t.mover;if(s){s.setCurrent(e);break}}},this._onKeyDown=async e=>{var t,i;let s,r;this._ignoredInputTimer&&(this._win().clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1);let n=e.keyCode;if(e.ctrlKey)return;switch(n){case J.Down:case J.Right:case J.Up:case J.Left:case J.PageDown:case J.PageUp:case J.Home:case J.End:break;default:return}let l=this._tabster,a=l.focusedElement.getFocusedElement();if(!a||await this._isIgnoredInput(a,n))return;let u=G.getTabsterContext(l,a,{checkRtl:!0});if(!u||!u.mover||u.isExcludedFromMover||u.ignoreKeydown(e)||u.isGroupperFirst&&(null===(i=u.groupper)||void 0===i?void 0:i.isActive(!0)))return;let d=u.mover,c=d.getElement();if(!c)return;let m=l.focusable,_=d.getProps(),f=_.direction||h.Both,b=f===h.Both,v=b||f===h.Vertical,g=b||f===h.Horizontal,p=f===h.Grid,T=_.cyclic,E=0,y=0;if(p&&(E=Math.ceil((r=a.getBoundingClientRect()).left),y=Math.floor(r.right)),u.isRtl&&(n===J.Right?n=J.Left:n===J.Left&&(n=J.Right)),n===J.Down&&v||n===J.Right&&(g||p)){if((s=m.findNext({currentElement:a,container:c,useActiveModalizer:!0}))&&p){let e=Math.ceil(s.getBoundingClientRect().left);y>e&&(s=void 0)}else!s&&T&&(s=m.findFirst({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0}))}else if(n===J.Up&&v||n===J.Left&&(g||p)){if((s=m.findPrev({currentElement:a,container:c,useActiveModalizer:!0}))&&p){let e=Math.floor(s.getBoundingClientRect().right);e>E&&(s=void 0)}else!s&&T&&(s=m.findLast({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0}))}else if(n===J.Home)p?m.findElement({container:c,currentElement:a,ignoreUncontrolled:!0,useActiveModalizer:!0,isBackward:!0,acceptCondition:e=>{var t;if(!m.isFocusable(e))return!1;let i=Math.ceil(null!==(t=e.getBoundingClientRect().left)&&void 0!==t?t:0);return e!==a&&E<=i||(s=e,!1)}}):s=m.findFirst({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0});else if(n===J.End)p?m.findElement({container:c,currentElement:a,ignoreUncontrolled:!0,useActiveModalizer:!0,acceptCondition:e=>{var t;if(!m.isFocusable(e))return!1;let i=Math.ceil(null!==(t=e.getBoundingClientRect().left)&&void 0!==t?t:0);return e!==a&&E>=i||(s=e,!1)}}):s=m.findLast({container:c,ignoreUncontrolled:!0,useActiveModalizer:!0});else if(n===J.PageUp){if(m.findElement({currentElement:a,container:c,useActiveModalizer:!0,isBackward:!0,acceptCondition:e=>!!m.isFocusable(e)&&(!F(this._win,e,d.visibilityTolerance)||(s=e,!1))}),p&&s){let e=Math.ceil(s.getBoundingClientRect().left);m.findElement({currentElement:s,container:c,useActiveModalizer:!0,acceptCondition:t=>{if(!m.isFocusable(t))return!1;let i=Math.ceil(t.getBoundingClientRect().left);return E<i||e>=i||(s=t,!1)}})}s&&I(this._win,s,!1)}else if(n===J.PageDown){if(m.findElement({currentElement:a,container:c,useActiveModalizer:!0,acceptCondition:e=>!!m.isFocusable(e)&&(!F(this._win,e,d.visibilityTolerance)||(s=e,!1))}),p&&s){let e=Math.ceil(s.getBoundingClientRect().left);m.findElement({currentElement:s,container:c,useActiveModalizer:!0,isBackward:!0,acceptCondition:t=>{if(!m.isFocusable(t))return!1;let i=Math.ceil(t.getBoundingClientRect().left);return E>i||e<=i||(s=t,!1)}})}s&&I(this._win,s,!0)}else if(p){let e,t;let i=n===J.Up,o=E,l=Math.ceil(r.top),u=y,d=Math.floor(r.bottom),h=0;m.findAll({container:c,currentElement:a,isBackward:i,onElement:s=>{let r=s.getBoundingClientRect(),n=Math.ceil(r.left),a=Math.ceil(r.top),c=Math.floor(r.right),m=Math.floor(r.bottom);if(i&&l<m||!i&&d>a)return!0;let _=Math.ceil(Math.min(u,c))-Math.floor(Math.max(o,n)),f=Math.ceil(Math.min(u-o,c-n));if(_>0&&f>=_){let t=_/f;t>h&&(e=s,h=t)}else if(0===h){let i=function(e,t,i,s,o,r,n,l){let a=i<o?o-i:n<e?e-n:0,u=s<r?r-s:l<t?t-l:0;return 0===a?u:0===u?a:Math.sqrt(a*a+u*u)}(o,l,u,d,n,a,c,m);(void 0===t||i<t)&&(t=i,e=s)}else if(h>0)return!1;return!0}}),s=e}s&&(e.preventDefault(),e.stopImmediatePropagation(),(0,o.ev)(s))},this._tabster=e,this._win=t,this._initTimer=t().setTimeout(this._init,0),this._movers={},e.focusedElement.subscribe(this._onFocus)}dispose(){var e;let t=this._win();this._tabster.focusedElement.unsubscribe(this._onFocus),this._initTimer&&(t.clearTimeout(this._initTimer),delete this._initTimer),null===(e=this._ignoredInputResolve)||void 0===e||e.call(this,!1),this._ignoredInputTimer&&(t.clearTimeout(this._ignoredInputTimer),delete this._ignoredInputTimer),t.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._movers).forEach(e=>{this._movers[e]&&(this._movers[e].dispose(),delete this._movers[e])})}createMover(e,t){let i=new q(this._tabster,e,this._onMoverDispose,t);return this._movers[i.id]=i,i}async _isIgnoredInput(e,t){var i;if("true"===e.getAttribute("aria-expanded"))return!0;if(M(e,"input, textarea, *[contenteditable]")){let s,o=0,r=0,n=0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName){let s=e.type,l=e.value;if(n=(l||"").length,"email"===s||"number"===s){if(n){let s=null===(i=e.ownerDocument.defaultView)||void 0===i?void 0:i.getSelection();if(s){let e=s.toString().length,i=t===J.Left||t===J.Up;if(s.modify("extend",i?"backward":"forward","character"),e!==s.toString().length)return s.modify("extend",i?"forward":"backward","character"),!0;n=0}}}else{let t=e.selectionStart;if(null===t)return"hidden"===s;o=t||0,r=e.selectionEnd||0}}else"true"===e.contentEditable&&(s=new(function(e){let t=g(e);if(t.basics.Promise)return t.basics.Promise;throw Error("No Promise defined.")}(this._win))(t=>{this._ignoredInputResolve=e=>{delete this._ignoredInputResolve,t(e)};let i=this._win();this._ignoredInputTimer&&i.clearTimeout(this._ignoredInputTimer);let{anchorNode:s,focusNode:l,anchorOffset:a,focusOffset:u}=i.getSelection()||{};this._ignoredInputTimer=i.setTimeout(()=>{var t,d,c;delete this._ignoredInputTimer;let{anchorNode:h,focusNode:m,anchorOffset:_,focusOffset:f}=i.getSelection()||{};if(h!==s||m!==l||_!==a||f!==u){null===(t=this._ignoredInputResolve)||void 0===t||t.call(this,!1);return}if(o=_||0,r=f||0,n=(null===(d=e.textContent)||void 0===d?void 0:d.length)||0,h&&m&&e.contains(h)&&e.contains(m)&&h!==e){let t=!1,i=e=>{if(e===h)t=!0;else if(e===m)return!0;let s=e.textContent;if(s&&!e.firstChild){let e=s.length;t?m!==h&&(r+=e):(o+=e,r+=e)}let n=!1;for(let t=e.firstChild;t&&!n;t=t.nextSibling)n=i(t);return n};i(e)}null===(c=this._ignoredInputResolve)||void 0===c||c.call(this,!0)},0)}));if(s&&!await s||o!==r||o>0&&(t===J.Left||t===J.Up||t===J.Home)||o<n&&(t===J.Right||t===J.Down||t===J.End))return!0}return!1}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class Z{constructor(){}}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */class ee{constructor(e){this.keyboardNavigation=e.keyboardNavigation,this.focusedElement=e.focusedElement,this.focusable=e.focusable,this.root=e.root,this.uncontrolled=e.uncontrolled,this.core=e}}class et{constructor(e,t){var i;this._forgetMemorizedElements=[],this._wrappers=new Set,this._version="4.1.2",this._noop=!1,this.getWindow=()=>{if(!this._win)throw Error("Using disposed Tabster.");return this._win},this._storage=function(e){let t=e.__tabsterInstanceContext;return new((null==t?void 0:t.basics.WeakMap)||WeakMap)}(e),this._win=e;let s=this.getWindow;this.keyboardNavigation=new Q(s),this.focusedElement=new $(this,s),this.focusable=new j(this),this.root=new G(this,null==t?void 0:t.autoRoot),this.uncontrolled=new Z,this.controlTab=null===(i=null==t?void 0:t.controlTab)||void 0===i||i,this.rootDummyInputs=!!(null==t?void 0:t.rootDummyInputs),this.internal={stopObserver:()=>{this._unobserve&&(this._unobserve(),delete this._unobserve)},resumeObserver:e=>{if(!this._unobserve){let t=s().document;this._unobserve=/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */function(e,t,i,s){let o;if("undefined"==typeof MutationObserver)return()=>{};let n=t.getWindow,l=e=>{var s;for(let s of e){let e=s.target,o=s.removedNodes,n=s.addedNodes;if("attributes"===s.type)s.attributeName===r&&i(t,e);else{for(let e=0;e<o.length;e++)a(o[e],!0);for(let e=0;e<n.length;e++)a(n[e])}}null===(s=t.modalizer)||void 0===s||s.hiddenUpdate()};function a(t,i){o||(o=g(n).elementByUId),u(t,i);let s=y(e,t,e=>u(e,i));if(s)for(;s.nextNode(););}function u(e,s){var l;if(!e.getAttribute)return NodeFilter.FILTER_SKIP;let a=e.__tabsterElementUID;return a&&o&&(s?delete o[a]:null!==(l=o[a])&&void 0!==l||(o[a]=new T(n,e))),(_(t,e)||e.hasAttribute(r))&&i(t,e,s),NodeFilter.FILTER_SKIP}let d=new MutationObserver(l);return s&&a(n().document.body),d.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[r]}),()=>{d.disconnect()}}(t,this,f,e)}}},this.internal.resumeObserver(!1),function e(t){let i=g(t);i.fakeWeakRefsStarted||(i.fakeWeakRefsStarted=!0,i.WeakRef=i.basics.WeakRef),i.fakeWeakRefsTimer||(i.fakeWeakRefsTimer=t().setTimeout(()=>{i.fakeWeakRefsTimer=void 0,E(t),e(t)},12e4))}(s)}createTabster(e){let t=new ee(this);return e||this._wrappers.add(t),t}disposeTabster(e,t){t?this._wrappers.clear():this._wrappers.delete(e),0===this._wrappers.size&&this.dispose()}dispose(){var e,t,i,s,o,r,n;this.internal.stopObserver();let l=this._win;this._forgetMemorizedElements=[],l&&this._forgetMemorizedTimer&&(l.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer),null===(e=this.outline)||void 0===e||e.dispose(),null===(t=this.crossOrigin)||void 0===t||t.dispose(),null===(i=this.deloser)||void 0===i||i.dispose(),null===(s=this.groupper)||void 0===s||s.dispose(),null===(o=this.mover)||void 0===o||o.dispose(),null===(r=this.modalizer)||void 0===r||r.dispose(),null===(n=this.observedElement)||void 0===n||n.dispose(),this.keyboardNavigation.dispose(),this.focusable.dispose(),this.focusedElement.dispose(),this.root.dispose(),function(e){let t=g(e);t.fakeWeakRefsStarted=!1,t.fakeWeakRefsTimer&&(e().clearTimeout(t.fakeWeakRefsTimer),t.fakeWeakRefsTimer=void 0,t.fakeWeakRefs=[])}(this.getWindow),k(this.getWindow),this._storage=new WeakMap,this._wrappers.clear(),l&&(function(e){let t=e.__tabsterInstanceContext;t&&(t.elementByUId={},delete t.WeakRef,t.containerBoundingRectCache={},t.containerBoundingRectCacheTimer&&e.clearTimeout(t.containerBoundingRectCacheTimer),t.fakeWeakRefsTimer&&e.clearTimeout(t.fakeWeakRefsTimer),t.fakeWeakRefs=[],delete e.__tabsterInstanceContext)}(l),delete l.__tabsterInstance,delete this._win)}storageEntry(e,t){let i=this._storage,s=i.get(e);return s?!1===t&&0===Object.keys(s).length&&i.delete(e):!0===t&&(s={},i.set(e,s)),s}forceCleanup(){this._win&&(this._forgetMemorizedElements.push(this._win.document.body),this._forgetMemorizedTimer||(this._forgetMemorizedTimer=this._win.setTimeout(()=>{delete this._forgetMemorizedTimer;for(let e=this._forgetMemorizedElements.shift();e;e=this._forgetMemorizedElements.shift())k(this.getWindow,e),$.forgetMemorized(this.focusedElement,e)},0),E(this.getWindow,!0)))}}function ei(e,t){let i=e.__tabsterInstance;return i||(i=new et(e,t),e.__tabsterInstance=i),i.createTabster()}function es(e){let t=e.core;return t.mover||(t.mover=new Y(t,t.getWindow)),t.mover}function eo(e,t){e.core.disposeTabster(e,t)}}}]);